var behaviourTree,fsm,utilityAI;window.fsm={},window.behaviourTree={},window.utilityAI={},window.__extends=this&&this.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])};return function(e,n){function i(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(i.prototype=n.prototype,new i)}}(),function(t){var e=function(){function e(){this.status=t.TaskStatus.Invalid}return e.prototype.invalidate=function(){this.status=t.TaskStatus.Invalid},e.prototype.onStart=function(){},e.prototype.onEnd=function(){},e.prototype.tick=function(e){return this.status==t.TaskStatus.Invalid&&this.onStart(),this.status=this.update(e),this.status!=t.TaskStatus.Running&&this.onEnd(),this.status},e}();t.Behavior=e}(behaviourTree||(behaviourTree={})),function(t){var e=function(){function t(t,e,n){void 0===n&&(n=.2),this._context=t,this._root=e,this.updatePeriod=this._elapsedTime=n}return t.prototype.tick=function(){if(this.updatePeriod>0){if(this._elapsedTime-=es.Time.deltaTime,this._elapsedTime<=0){for(;this._elapsedTime<=0;)this._elapsedTime+=this.updatePeriod;this._root.tick(this._context)}}else this._root.tick(this._context)},t}();t.BehaviorTree=e}(behaviourTree||(behaviourTree={})),function(t){var e=function(){function e(t){this._parentNodeStack=new Array,this._context=t}return e.begin=function(t){return new e(t)},e.prototype.setChildOnParent=function(e){var n=t.ArrayExt.peek(this._parentNodeStack);return n instanceof t.Composite?n.addChild(e):n instanceof t.Decorator&&(n.child=e,this.endDecorator()),this},e.prototype.pushParentNode=function(e){return this._parentNodeStack.length>0&&this.setChildOnParent(e),t.ArrayExt.push(this._parentNodeStack,e),this},e.prototype.endDecorator=function(){return this._currentNode=t.ArrayExt.pop(this._parentNodeStack),this},e.prototype.action=function(e){return t.Assert.isFalse(0==this._parentNodeStack.length,"无法创建无嵌套的动作节点, 它必须是一个叶节点"),this.setChildOnParent(new t.ExecuteAction(e))},e.prototype.actionR=function(e){return this.action(function(n){return e(n)?t.TaskStatus.Success:t.TaskStatus.Failure})},e.prototype.conditional=function(e){return t.Assert.isFalse(0==this._parentNodeStack.length,"无法创建无嵌套的条件节点, 它必须是一个叶节点"),this.setChildOnParent(new t.ExecuteActionConditional(e))},e.prototype.conditionalR=function(e){return this.conditional(function(n){return e(n)?t.TaskStatus.Success:t.TaskStatus.Failure})},e.prototype.logAction=function(e){return t.Assert.isFalse(0==this._parentNodeStack.length,"无法创建无嵌套的动作节点, 它必须是一个叶节点"),this.setChildOnParent(new t.LogAction(e))},e.prototype.waitAction=function(e){return t.Assert.isFalse(0==this._parentNodeStack.length,"无法创建无嵌套的动作节点, 它必须是一个叶节点"),this.setChildOnParent(new t.WaitAciton(e))},e.prototype.subTree=function(e){return t.Assert.isFalse(0==this._parentNodeStack.length,"无法创建无嵌套的动作节点, 它必须是一个叶节点"),this.setChildOnParent(new t.BehaviorTreeReference(e))},e.prototype.conditionalDecorator=function(e,n){void 0===n&&(n=!0);var i=new t.ExecuteActionConditional(e);return this.pushParentNode(new t.ConditionalDecorator(i,n))},e.prototype.conditionalDecoratorR=function(e,n){return void 0===n&&(n=!0),this.conditionalDecorator(function(n){return e(n)?t.TaskStatus.Success:t.TaskStatus.Failure},n)},e.prototype.alwaysFail=function(){return this.pushParentNode(new t.AlwaysFail)},e.prototype.alwaysSucceed=function(){return this.pushParentNode(new t.AlwaysSucceed)},e.prototype.inverter=function(){return this.pushParentNode(new t.Inverter)},e.prototype.repeater=function(e){return this.pushParentNode(new t.Repeater(e))},e.prototype.untilFail=function(){return this.pushParentNode(new t.UntilFail)},e.prototype.untilSuccess=function(){return this.pushParentNode(new t.UntilSuccess)},e.prototype.paraller=function(){return this.pushParentNode(new t.Parallel)},e.prototype.parallelSelector=function(){return this.pushParentNode(new t.ParallelSelector)},e.prototype.selector=function(e){return void 0===e&&(e=t.AbortTypes.None),this.pushParentNode(new t.Selector(e))},e.prototype.randomSelector=function(){return this.pushParentNode(new t.RandomSelector)},e.prototype.sequence=function(e){return void 0===e&&(e=t.AbortTypes.None),this.pushParentNode(new t.Sequence(e))},e.prototype.randomSequence=function(){return this.pushParentNode(new t.RandomSequence)},e.prototype.endComposite=function(){return t.Assert.isTrue(t.ArrayExt.peek(this._parentNodeStack)instanceof t.Composite,"尝试结束复合器，但顶部节点是装饰器"),this._currentNode=t.ArrayExt.pop(this._parentNodeStack),this},e.prototype.build=function(e){if(void 0===e&&(e=.2),!this._currentNode)throw new Error("无法创建零节点的行为树");return new t.BehaviorTree(this._context,this._currentNode,e)},e}();t.BehaviorTreeBuilder=e}(behaviourTree||(behaviourTree={})),function(t){!function(t){t[t.Invalid=0]="Invalid",t[t.Success=1]="Success",t[t.Failure=2]="Failure",t[t.Running=3]="Running"}(t.TaskStatus||(t.TaskStatus={}))}(behaviourTree||(behaviourTree={})),function(t){var e=function(e){function n(t){var n=e.call(this)||this;return n._childTree=t,n}return __extends(n,e),n.prototype.update=function(e){return this._childTree.tick(),t.TaskStatus.Success},n}(t.Behavior);t.BehaviorTreeReference=e}(behaviourTree||(behaviourTree={})),function(t){var e=function(e){function n(t){var n=e.call(this)||this;return n._action=t,n}return __extends(n,e),n.prototype.update=function(e){return t.Assert.isNotNull(this._action,"action 必须不为空"),this._action(e)},n}(t.Behavior);t.ExecuteAction=e}(behaviourTree||(behaviourTree={})),function(t){var e=function(e){function n(t){var n=e.call(this)||this;return n.isError=!1,n.text=t,n}return __extends(n,e),n.prototype.update=function(e){return this.isError?console.error(this.text):console.log(this.text),t.TaskStatus.Success},n}(t.Behavior);t.LogAction=e}(behaviourTree||(behaviourTree={})),function(t){var e=function(e){function n(t){var n=e.call(this)||this;return n._startTime=0,n.waitTime=t,n}return __extends(n,e),n.prototype.onStart=function(){this._startTime=0},n.prototype.update=function(e){return 0==this._startTime&&(this._startTime=es.Time.totalTime),es.Time.totalTime-this._startTime>=this.waitTime?t.TaskStatus.Success:t.TaskStatus.Running},n}(t.Behavior);t.WaitAciton=e}(behaviourTree||(behaviourTree={})),function(t){!function(t){t[t.None=0]="None",t[t.LowerPriority=1]="LowerPriority",t[t.Self=2]="Self",t[t.Both=3]="Both"}(t.AbortTypes||(t.AbortTypes={}));var e=function(){function t(){}return t.has=function(t,e){return(t&e)==e},t}();t.AbortTypesExt=e}(behaviourTree||(behaviourTree={})),function(t){var e=function(e){function n(){var n=null!==e&&e.apply(this,arguments)||this;return n.abortType=t.AbortTypes.None,n._children=new Array,n._hasLowerPriorityConditionalAbort=!1,n._currentChildIndex=0,n}return __extends(n,e),n.prototype.invalidate=function(){e.prototype.invalidate.call(this);for(var t=0;t<this._children.length;t++)this._children[t].invalidate()},n.prototype.onStart=function(){this._hasLowerPriorityConditionalAbort=this.hasLowerPriorityConditionalAbortInChildren(),this._currentChildIndex=0},n.prototype.onEnd=function(){for(var t=0;t<this._children.length;t++)this._children[t].invalidate()},n.prototype.hasLowerPriorityConditionalAbortInChildren=function(){for(var e=0;e<this._children.length;e++){var n=this._children[e];if(null!=n&&t.AbortTypesExt.has(n.abortType,t.AbortTypes.LowerPriority)&&n.isFirstChildConditional())return!0}return!1},n.prototype.addChild=function(t){this._children.push(t)},n.prototype.isFirstChildConditional=function(){return t.isIConditional(this._children[0])},n.prototype.updateSelfAbortConditional=function(e,n){for(var i=0;i<this._currentChildIndex;i++){var r=this._children[i];if(t.isIConditional(r))if(this.updateConditionalNode(e,r)!=n){this._currentChildIndex=i;for(var o=i;o<this._children.length;o++)this._children[o].invalidate();break}}},n.prototype.updateLowerPriorityAbortConditional=function(e,n){for(var i=0;i<this._currentChildIndex;i++){var r=this._children[i];if(null!=r&&t.AbortTypesExt.has(r.abortType,t.AbortTypes.LowerPriority)){var o=r._children[0];if(this.updateConditionalNode(e,o)!=n){this._currentChildIndex=i;for(var a=i;a<this._children.length;a++)this._children[a].invalidate();break}}}},n.prototype.updateConditionalNode=function(e,n){return n instanceof t.ConditionalDecorator?n.executeConditional(e,!0):n.update(e)},n}(t.Behavior);t.Composite=e}(behaviourTree||(behaviourTree={})),function(t){var e=function(e){function n(){return null!==e&&e.apply(this,arguments)||this}return __extends(n,e),n.prototype.update=function(e){for(var n=!0,i=0;i<this._children.length;i++){var r=this._children[i];if(r.tick(e),r.status==t.TaskStatus.Failure)return t.TaskStatus.Failure;r.status!=t.TaskStatus.Success&&(n=!1)}return n?t.TaskStatus.Success:t.TaskStatus.Running},n}(t.Composite);t.Parallel=e}(behaviourTree||(behaviourTree={})),function(t){var e=function(e){function n(){return null!==e&&e.apply(this,arguments)||this}return __extends(n,e),n.prototype.update=function(e){for(var n=!0,i=0;i<this._children.length;i++){var r=this._children[i];if(r.tick(e),r.status==t.TaskStatus.Success)return t.TaskStatus.Success;r.status!=t.TaskStatus.Failure&&(n=!1)}return n?t.TaskStatus.Failure:t.TaskStatus.Running},n}(t.Composite);t.ParallelSelector=e}(behaviourTree||(behaviourTree={})),function(t){var e=function(e){function n(n){void 0===n&&(n=t.AbortTypes.None);var i=e.call(this)||this;return i.abortType=n,i}return __extends(n,e),n.prototype.update=function(e){0!=this._currentChildIndex&&this.handleConditionalAborts(e);var n=this._children[this._currentChildIndex].tick(e);return n!=t.TaskStatus.Failure?n:(this._currentChildIndex++,this._currentChildIndex==this._children.length?(this._currentChildIndex=0,t.TaskStatus.Failure):t.TaskStatus.Running)},n.prototype.handleConditionalAborts=function(e){this._hasLowerPriorityConditionalAbort&&this.updateLowerPriorityAbortConditional(e,t.TaskStatus.Failure),t.AbortTypesExt.has(this.abortType,t.AbortTypes.Self)&&this.updateSelfAbortConditional(e,t.TaskStatus.Failure)},n}(t.Composite);t.Selector=e}(behaviourTree||(behaviourTree={})),function(t){var e=function(e){function n(){return null!==e&&e.apply(this,arguments)||this}return __extends(n,e),n.prototype.onStart=function(){t.ArrayExt.shuffle(this._children)},n}(t.Selector);t.RandomSelector=e}(behaviourTree||(behaviourTree={})),function(t){var e=function(e){function n(n){void 0===n&&(n=t.AbortTypes.None);var i=e.call(this)||this;return i.abortType=n,i}return __extends(n,e),n.prototype.update=function(e){0!=this._currentChildIndex&&this.handleConditionalAborts(e);var n=this._children[this._currentChildIndex].tick(e);return n!=t.TaskStatus.Success?n:(this._currentChildIndex++,this._currentChildIndex==this._children.length?(this._currentChildIndex=0,t.TaskStatus.Success):t.TaskStatus.Running)},n.prototype.handleConditionalAborts=function(e){this._hasLowerPriorityConditionalAbort&&this.updateLowerPriorityAbortConditional(e,t.TaskStatus.Success),t.AbortTypesExt.has(this.abortType,t.AbortTypes.Self)&&this.updateSelfAbortConditional(e,t.TaskStatus.Success)},n}(t.Composite);t.Sequence=e}(behaviourTree||(behaviourTree={})),function(t){var e=function(e){function n(){return null!==e&&e.apply(this,arguments)||this}return __extends(n,e),n.prototype.onStart=function(){t.ArrayExt.shuffle(this._children)},n}(t.Sequence);t.RandomSequence=e}(behaviourTree||(behaviourTree={})),function(t){var e=function(t){function e(e){var n=t.call(this,e)||this;return n.discriminator="IConditional",n}return __extends(e,t),e}(t.ExecuteAction);t.ExecuteActionConditional=e}(behaviourTree||(behaviourTree={})),function(t){t.isIConditional=function(t){return"IConditional"===t.discriminator}}(behaviourTree||(behaviourTree={})),function(t){var e=function(e){function n(t){var n=e.call(this)||this;return n.discriminator="IConditional",n._successProbability=t,n}return __extends(n,e),n.prototype.update=function(e){return Math.random()>this._successProbability?t.TaskStatus.Success:t.TaskStatus.Failure},n}(t.Behavior);t.RandomProbability=e}(behaviourTree||(behaviourTree={})),function(t){var e=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return __extends(e,t),e.prototype.invalidate=function(){t.prototype.invalidate.call(this),this.child.invalidate()},e}(t.Behavior);t.Decorator=e}(behaviourTree||(behaviourTree={})),function(t){var e=function(e){function n(){return null!==e&&e.apply(this,arguments)||this}return __extends(n,e),n.prototype.update=function(e){return t.Assert.isNotNull(this.child,"child必须不能为空"),this.child.update(e)==t.TaskStatus.Running?t.TaskStatus.Running:t.TaskStatus.Failure},n}(t.Decorator);t.AlwaysFail=e}(behaviourTree||(behaviourTree={})),function(t){var e=function(e){function n(){return null!==e&&e.apply(this,arguments)||this}return __extends(n,e),n.prototype.update=function(e){return t.Assert.isNotNull(this.child,"child必须不能为空"),this.child.update(e)==t.TaskStatus.Running?t.TaskStatus.Running:t.TaskStatus.Success},n}(t.Decorator);t.AlwaysSucceed=e}(behaviourTree||(behaviourTree={})),function(t){var e=function(e){function n(n,i){void 0===i&&(i=!0);var r=e.call(this)||this;return r.discriminator="IConditional",r._conditionalStatus=t.TaskStatus.Invalid,t.Assert.isTrue(t.isIConditional(n),"conditional 必须继承 IConditional"),r._conditional=n,r._shouldReevaluate=i,r}return __extends(n,e),n.prototype.invalidate=function(){e.prototype.invalidate.call(this),this._conditionalStatus=t.TaskStatus.Invalid},n.prototype.onStart=function(){this._conditionalStatus=t.TaskStatus.Invalid},n.prototype.update=function(e){return t.Assert.isNotNull(this.child,"child不能为空"),this._conditionalStatus=this.executeConditional(e),this._conditionalStatus==t.TaskStatus.Success?this.child.tick(e):t.TaskStatus.Failure},n.prototype.executeConditional=function(e,n){return void 0===n&&(n=!1),(n||this._shouldReevaluate||this._conditionalStatus==t.TaskStatus.Invalid)&&(this._conditionalStatus=this._conditional.update(e)),this._conditionalStatus},n}(t.Decorator);t.ConditionalDecorator=e}(behaviourTree||(behaviourTree={})),function(t){var e=function(e){function n(){return null!==e&&e.apply(this,arguments)||this}return __extends(n,e),n.prototype.update=function(e){t.Assert.isNotNull(this.child,"child必须不能为空");var n=this.child.tick(e);return n==t.TaskStatus.Success?t.TaskStatus.Failure:n==t.TaskStatus.Failure?t.TaskStatus.Success:t.TaskStatus.Running},n}(t.Decorator);t.Inverter=e}(behaviourTree||(behaviourTree={})),function(t){var e=function(e){function n(t,n){void 0===n&&(n=!1);var i=e.call(this)||this;return i.repeatForever=!1,i._iterationCount=0,i.count=t,i.endOnFailure=n,i}return __extends(n,e),n.prototype.onStart=function(){this._iterationCount=0},n.prototype.update=function(e){if(t.Assert.isNotNull(this.child,"child必须不能为空"),!this.repeatForever&&this._iterationCount==this.count)return t.TaskStatus.Success;var n=this.child.tick(e);return this._iterationCount++,this.endOnFailure&&n==t.TaskStatus.Failure?t.TaskStatus.Success:this.repeatForever||this._iterationCount!=this.count?t.TaskStatus.Running:t.TaskStatus.Success},n}(t.Decorator);t.Repeater=e}(behaviourTree||(behaviourTree={})),function(t){var e=function(e){function n(){return null!==e&&e.apply(this,arguments)||this}return __extends(n,e),n.prototype.update=function(e){return t.Assert.isNotNull(this.child,"child必须不为空"),this.child.update(e)!=t.TaskStatus.Failure?t.TaskStatus.Running:t.TaskStatus.Success},n}(t.Decorator);t.UntilFail=e}(behaviourTree||(behaviourTree={})),function(t){var e=function(e){function n(){return null!==e&&e.apply(this,arguments)||this}return __extends(n,e),n.prototype.update=function(e){return t.Assert.isNotNull(this.child,"child必须不为空"),this.child.update(e)!=t.TaskStatus.Success?t.TaskStatus.Running:t.TaskStatus.Success},n}(t.Decorator);t.UntilSuccess=e}(behaviourTree||(behaviourTree={})),function(t){var e=function(){function e(){}return e.shuffle=function(e){for(var n=e.length-1;n>1;){n--;var i=t.Random.range(0,n+1),r=e[i];e[i]=e[n],e[n]=r}},e.peek=function(t){return t[0]},e.push=function(t,e){t.splice(0,0,e)},e.pop=function(t){return t.shift()},e}();t.ArrayExt=e}(behaviourTree||(behaviourTree={})),function(t){var e=function(){function t(){}return t.fail=function(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];t?console.assert(!1,t,e):console.assert(!1)},t.isTrue=function(e,n){for(var i=[],r=2;r<arguments.length;r++)i[r-2]=arguments[r];e||(n?t.fail(n,i):t.fail())},t.isNotNull=function(e,n){for(var i=[],r=2;r<arguments.length;r++)i[r-2]=arguments[r];t.isTrue(null!=e,n,i)},t.isFalse=function(t,e){for(var n=[],i=2;i<arguments.length;i++)n[i-2]=arguments[i];e?this.isTrue(!t,e,n):this.isTrue(!t)},t}();t.Assert=e}(behaviourTree||(behaviourTree={})),function(t){var e=function(){function t(){}return t.range=function(t,e){var n=(new Date).getTime();return(t=t||0)+(n=(9301*n+49297)%233280)/233280*((e=e||1)-t)},t}();t.Random=e}(behaviourTree||(behaviourTree={})),function(t){var e=function(){function t(){}return t.prototype.setMachineAndContext=function(t,e){this._machine=t,this._context=e,this.onInitialized()},t.prototype.onInitialized=function(){},t.prototype.begin=function(){},t.prototype.reason=function(){},t.prototype.end=function(){},t}();t.State=e}(fsm||(fsm={})),function(t){var e=function(){function t(t,e){this.elapsedTimeInState=0,this._states=new Map,this._context=t,this.addState(e),this._currentState=e,this._currentState.begin()}return Object.defineProperty(t.prototype,"currentState",{get:function(){return this._currentState},enumerable:!0,configurable:!0}),t.prototype.addState=function(t){t.setMachineAndContext(this,this._context),this._states.set(es.TypeUtils.getType(t),t)},t.prototype.update=function(t){this.elapsedTimeInState+=t,this._currentState.reason(),this._currentState.update(t)},t.prototype.getState=function(t){return this._states.has(t)?this._states.get(t):(console.error("状态"+t+"不存在。你是不是在调用addState的时候忘记添加了?"),null)},t.prototype.changeState=function(t){if(this._currentState instanceof t)return this._currentState;if(this.currentState&&this._currentState.end(),!this._states.has(t))return console.error("状态"+t+"不存在。你是不是在调用addState的时候忘记添加了?"),null;this.elapsedTimeInState=0,this.previousState=this._currentState;var e=this._states.get(t);return e&&(this._currentState=e),this._currentState.begin(),null!=this.onStateChanged&&this.onStateChanged(),this._currentState},t}();t.StateMachine=e}(fsm||(fsm={})),function(t){var e=function(){function t(t,e,n){void 0===n&&(n=.2),this._rootReasoner=e,this._context=t,this.updatePeriod=this._elapsedTime=n}return t.prototype.tick=function(){for(this._elapsedTime-=es.Time.deltaTime;this._elapsedTime<=0;){this._elapsedTime+=this.updatePeriod;var t=this._rootReasoner.select(this._context);null!=t&&t.execute(this._context)}},t}();t.UtilityAI=e}(utilityAI||(utilityAI={})),function(t){var e=function(){function t(t){this._action=t}return t.prototype.execute=function(t){this._action(t)},t}();t.ActionExecutor=e}(utilityAI||(utilityAI={})),function(t){var e=function(){function t(){this._appraisals=new Array}return t.prototype.getBestOption=function(t,e){for(var n=null,i=-3.402823e38,r=0;r<e.length;r++){for(var o=e[r],a=0,s=0;s<this._appraisals.length;s++)a+=this._appraisals[s].getScore(t,o);a>i&&(i=a,n=o)}return n},t.prototype.addScorer=function(t){return this._appraisals.push(t),this},t}();t.ActionWithOptions=e}(utilityAI||(utilityAI={})),function(t){var e=function(){function t(){this._actions=new Array}return t.prototype.execute=function(t){for(var e=0;e<this._actions.length;e++)this._actions[e].execute(t)},t.prototype.addAction=function(t){return this._actions.push(t),this},t}();t.CompositeAction=e}(utilityAI||(utilityAI={})),function(t){var e=function(){function t(t){this._text=t}return t.prototype.execute=function(t){console.log(this._text)},t}();t.LogAction=e}(utilityAI||(utilityAI={})),function(t){var e=function(){function t(t){this._reasoner=t}return t.prototype.execute=function(t){var e=this._reasoner.select(t);null!=e&&e.execute(t)},t}();t.ReasonerAction=e}(utilityAI||(utilityAI={})),function(t){var e=function(){function t(t){void 0===t&&(t=0),this._appraisals=new Array,this.threshold=t}return t.prototype.addAppraisal=function(t){return this._appraisals.push(t),this},t.prototype.getScore=function(t){for(var e=0,n=0;n<this._appraisals.length;n++){var i=this._appraisals[n].getScore(t);if(i<this.threshold)return 0;e+=i}return e},t}();t.AllOrNothingConsideration=e}(utilityAI||(utilityAI={})),function(t){var e=function(){function t(t){void 0===t&&(t=1),this.score=t}return t.prototype.getScore=function(t){return this.score},t}();t.FixedScoreConsideration=e}(utilityAI||(utilityAI={})),function(t){var e=function(){function t(){this._appraisals=new Array}return t.prototype.getScore=function(t){for(var e=0,n=0;n<this._appraisals.length;n++)e+=this._appraisals[n].getScore(t);return e},t}();t.SumOfChildrenConsideration=e}(utilityAI||(utilityAI={})),function(t){var e=function(){function t(t){this._appraisals=new Array,this.threshold=t}return t.prototype.getScore=function(t){for(var e=0,n=0;n<this._appraisals.length;n++){var i=this._appraisals[n].getScore(t);if(i<this.threshold)return e;e+=i}return e},t}();t.ThresholdConsideration=e}(utilityAI||(utilityAI={})),function(t){var e=function(){function t(t){this._appraisalAction=t}return t.prototype.getScore=function(t){return this._appraisalAction(t)},t}();t.ActionAppraisal=e}(utilityAI||(utilityAI={})),function(t){var e=function(){function e(){this.defaultConsideration=new t.FixedScoreConsideration,this._condiderations=new Array}return e.prototype.select=function(t){var e=this.selectBestConsideration(t);return null!=e?e.action:null},e.prototype.addConsideration=function(t){return this._condiderations.push(t),this},e.prototype.setDefaultConsideration=function(t){return this.defaultConsideration=t,this},e}();t.Reasoner=e}(utilityAI||(utilityAI={})),function(t){var e=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return __extends(e,t),e.prototype.selectBestConsideration=function(t){for(var e=this.defaultConsideration.getScore(t),n=0;n<this._condiderations.length;n++)if(this._condiderations[n].getScore(t)>=e)return this._condiderations[n];return this.defaultConsideration},e}(t.Reasoner);t.FirstScoreReasoner=e}(utilityAI||(utilityAI={})),function(t){var e=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return __extends(e,t),e.prototype.selectBestConsideration=function(t){for(var e=this.defaultConsideration.getScore(t),n=null,i=0;i<this._condiderations.length;i++){var r=this._condiderations[i].getScore(t);r>e&&(e=r,n=this._condiderations[i])}return null==n?this.defaultConsideration:n},e}(t.Reasoner);t.HighestScoreReasoner=e}(utilityAI||(utilityAI={}));